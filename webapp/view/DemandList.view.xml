<mvc:View xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:f="sap.f"
	xmlns:smartFilterBar="sap.ui.comp.smartfilterbar" xmlns:smartTable="sap.ui.comp.smarttable" xmlns:table="sap.ui.table"
	xmlns:customData="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
	controllerName="com.evorait.evosuite.evoprep.controller.DemandList" xmlns:html="http://www.w3.org/1999/xhtml">
	<f:DynamicPage id="demandListPage" headerExpanded="true" preserveHeaderStateOnScroll="true" showFooter="false" class="sapUiNoContentPadding"
		busy="{viewModel>/busy}" busyIndicatorDelay="{viewModel>/delay}">
		<f:title>
			<f:DynamicPageTitle>
				<f:heading>
					<Image src="{viewModel>/logoUrl}" densityAware="false" height="30px" alt="EvoPrep" id="idEvoPrepImageLogo"/>
				</f:heading>
				<f:navigationActions>
					<Button text="{i18n>btn.showPrePlan}" type="Emphasized" press="goBackToPrePlans"/>
					<core:Fragment fragmentName="com.evorait.evosuite.evoprep.view.fragments.HeaderAction" type="XML"/>
					<core:ExtensionPoint name="PageExtP|DemandList|PlanItemsSet|Title|Actions"/>
				</f:navigationActions>
			</f:DynamicPageTitle>
		</f:title>
		<f:header>
			<f:DynamicPageHeader pinnable="true">
				<f:content>
					<core:ExtensionPoint name="PageExtP|DemandList|PlanItemsSet|Head"/>
					<smartFilterBar:SmartFilterBar id="demandListSmartFilterBar" entitySet="PlanItemsSet" useDateRangeType="true"
						persistencyKey="com.evorait.evosuite.evoprep.demandListsFilterbar" initialized="onInitializedSmartVariant">
						<!-- layout data used to make the table growing but the filter bar fixed -->
						<smartFilterBar:layoutData>
							<FlexItemData shrinkFactor="0"/>
						</smartFilterBar:layoutData>
						<smartFilterBar:controlConfiguration>
							<core:ExtensionPoint name="FilterExtP|DemandList|PlanItemsSet|ControlConfiguration"/>
						</smartFilterBar:controlConfiguration>
						<smartFilterBar:groupConfiguration>
							<core:ExtensionPoint name="FilterExtP|DemandList|PlanItemsSet|GroupConfiguration"/>
						</smartFilterBar:groupConfiguration>
					</smartFilterBar:SmartFilterBar>
				</f:content>
			</f:DynamicPageHeader>
		</f:header>
		<f:content>
			<smartTable:SmartTable id="demandListSmartTable" height="100%" width="100%" entitySet="PlanItemsSet" header="{i18n>tit.OperationsTable}"
				tableType="Table" useExportToExcel="true" useVariantManagement="true" persistencyKey="com.evorait.evosuite.evoprep.DemandListTable"
				useTablePersonalisation="true" showRowCount="true" enableAutoBinding="true" demandPopin="false" smartFilterId="demandListSmartFilterBar"
				customData:useSmartField="true" customData:useSmartToggle="true"
				editTogglable="{parts: ['user>/ENABLE_ITEM_UPDATE', 'viewModel>/authorizeCheck', 'user>/ENABLE_IW32_AUTH_CHECK'], formatter:'.formatter.enableEditToggleBtn'}"
				editToggled="onPressEdit"
				requestAtLeastFields="ObjectKey,NO_OF_PLAN_ID,NO_OF_NW_KEY,ALLOW_EDIT,MATERIAL_STATUS_DESC,COMPONENT_EXISTS,MATERIAL_STATUS_ICON,MATERIAL_STATUS_STATE"
				beforeRebindTable="onOperationListDataReceived">
				<!-- layout data used to make the table growing but the filter bar fixed -->
				<smartTable:layoutData>
					<FlexItemData growFactor="1" baseSize="0%"/>
				</smartTable:layoutData>
				<smartTable:customToolbar>
					<Toolbar>
						<ToolbarSpacer/>
						<Text text="{i18n>xbut.SelectAll}"/>
						<Switch id="idSwitchSelectAll" change="onChangeSelectAll"
							enabled="{parts: ['viewModel>/authorizeCheck' , 'user>/ENABLE_IW32_AUTH_CHECK' ], formatter:'.formatter.enableBtn' }"/>
						<Button press="onPressCreatePrePlanButton" tooltip="{i18n>tit.createPrePlan}" text="{i18n>tit.createPrePlan}"
							visible="{= ${user>/ENABLE_PREPLAN_CREATE} === 'X'}" enabled="{viewModel>/allowPrePlanCreate}"/>
						<Button press="onPressAddExistingPlan" tooltip="{i18n>tit.addExistingPlan}" text="{i18n>tit.addExistingPlan}"
							visible="{= ${user>/ENABLE_PREPLAN_ITEM_ADD} === 'X'}"
							enabled="{= ${viewModel>/allowPrePlanCreate} &amp;&amp; ${viewModel>/bEnableAddOperations} }"/>
						<core:ExtensionPoint name="TableExtP|DemandList|PlanItemsSet|CustomToolbar"/>
					</Toolbar>
				</smartTable:customToolbar>
				<table:Table id="demandListPageSmartTableTable" rowActionCount="{= ${viewModel>/orderListEditMode} ? 0 : 1}" visibleRowCountMode="Auto"
					rowSelectionChange="handleDemandSelectionChange" enableSelectAll="true"
					selectionMode="{= ${viewModel>/orderListEditMode} ? 'None' : 'MultiToggle'}" threshold="100">
					<table:rowActionTemplate>
						<table:RowAction visible="{parts: [{path:'templateProperties>/navLinks'}], formatter:'.formatter.showDemandRowAction'}">
							<table:items>
								<table:RowActionItem press="onRowActionPress" icon="sap-icon://action"/>
							</table:items>
						</table:RowAction>
					</table:rowActionTemplate>
					<table:columns>
						<table:Column hAlign="Center" sortProperty="NO_OF_PLAN_ID" filterProperty="NO_OF_PLAN_ID" width="7rem">
							<Label text="{/PlanItemsSet/NO_OF_PLAN_ID/##com.sap.vocabularies.Common.v1.Label/String}"/>
							<table:customData>
								<core:CustomData key="p13nData"
									value='\{"columnKey": "NO_OF_PLAN_ID", "leadingProperty":"NO_OF_PLAN_ID", "filterProperty":"NO_OF_PLAN_ID", "sortProperty":"NO_OF_PLAN_ID", "columnIndex":"0"}'/>
							</table:customData>
							<table:template>
								<Link text="{NO_OF_PLAN_ID}" press="onPressPlanNumber"/>
							</table:template>
						</table:Column>
						<table:Column hAlign="Center" sortProperty="ALLOW_REPROCESS" filterProperty="ALLOW_REPROCESS" width="5rem">
							<Label text="{/PlanItemsSet/ALLOW_REPROCESS/##com.sap.vocabularies.Common.v1.Label/String}"
								tooltip="{/PlanItemsSet/ALLOW_REPROCESS/##com.sap.vocabularies.Common.v1.Label/String}"/>
							<table:customData>
								<core:CustomData key="p13nData"
									value='\{"columnKey": "ALLOW_REPROCESS", "leadingProperty":"ALLOW_REPROCESS", "filterProperty":"ALLOW_REPROCESS", "sortProperty":"ALLOW_REPROCESS", "columnIndex":"3"}'/>
							</table:customData>
							<table:template>
								<core:Icon src="sap-icon://alert" visible="{= ${ALLOW_REPROCESS} === 'X' }"
									tooltip="{/PlanItemsSet/ALLOW_REPROCESS/##com.sap.vocabularies.Common.v1.Label/String}"/>
							</table:template>
						</table:Column>
						<table:Column hAlign="Center" sortProperty="MATERIAL_STATUS" filterProperty="MATERIAL_STATUS" width="8rem">
							<Label text="{/PlanItemsSet/MATERIAL_STATUS/##com.sap.vocabularies.Common.v1.Label/String}"
								tooltip="{/PlanItemsSet/MATERIAL_STATUS/##com.sap.vocabularies.Common.v1.Label/String}"/>
							<table:customData>
								<core:CustomData key="p13nData"
									value='\{"columnKey": "MATERIAL_STATUS", "leadingProperty":"MATERIAL_STATUS", "filterProperty":"MATERIAL_STATUS", "sortProperty":"MATERIAL_STATUS", "columnIndex":"4"}'/>
							</table:customData>
							<table:template>
								<HBox>
									<ObjectStatus class="sapUiTinyMargin" tooltip="{MATERIAL_STATUS_DESC}" text="{MATERIAL_STATUS_DESC}" visible="{ path:'COMPONENT_EXISTS' }"
										icon="{MATERIAL_STATUS_ICON}" state="{path:'MATERIAL_STATUS_STATE',formatter:'.formatter.getDemandState'}"/>
								</HBox>
							</table:template>
						</table:Column>
						<table:Column hAlign="Center" sortProperty="NO_OF_NW_KEY" filterProperty="NO_OF_NW_KEY" width="9rem">
							<Label text="{/PlanItemsSet/NO_OF_NW_KEY/##com.sap.vocabularies.Common.v1.Label/String}"/>
							<table:customData>
								<core:CustomData key="p13nData"
									value='\{"columnKey": "NO_OF_NW_KEY", "leadingProperty":"NO_OF_NW_KEY", "filterProperty":"NO_OF_NW_KEY", "sortProperty":"NO_OF_NW_KEY", "columnIndex":"5"}'/>
							</table:customData>
							<table:template>
								<Link text="{NO_OF_NW_KEY}" press="onPressNetworkKey"/>
							</table:template>
						</table:Column>
						<core:ExtensionPoint name="PageExtP|DemandList|PlanItemsSet|SmartTable|Columns"/>
					</table:columns>
				</table:Table>
			</smartTable:SmartTable>
		</f:content>
	</f:DynamicPage>
</mvc:View>